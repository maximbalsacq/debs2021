# Testing
## Running tests
To run tests, use
```sh
cargo test
```
Note that two tests require `DEBS_DATA_ROOT` to be set correctly
(see [Setup and Configuration](#setup-and-configuration)).

## Tests 
### `aggregate::particle_aggregate_test::test_from_f32`
Tests if a aggregate is correctly built and calculated
from an iterator of float values representing p1/p2 values.

### `aggregate::particle_aggregate_test::test_aggregate_multiple`
Extends the previous tests to iteration over multiple
ParticleAggregates.

### `aggregate::window_test::join_test`
A simple test checking if two iterators of an IterPair can
be joined together using `with_analysis_windows`.

### `aggregate::window_test::split_join_test`
Tests if an iterator of tuples can be split into an IterPair,
then joined together.

### `aggregate::window_test::different_windowsizes_test`
Checks if the iterator works correctly when different window sizes
are specified. Some values of the first field of the iterpair
need to be correctly skipped for this test to pass.

### `spliter::spliter_test::simple_spliter_test`
A simple test which checks that an iterator yielding
tuples can be split into two iterators, and that each
iterator contains the correct values.

### `aqi::tests::test_valid_pm10_aqis` / `aqi::tests::test_valid_pm25_aqis`
These tests compare automatically calculated AQI values with
manually calculated ones to verify the AQI calculation works correctly.

### `aqi::tests::test_all_pm25_aqis_work`/`aqi::tests::test_all_pm10_aqis_work`
As the range of valid AQI values is based on the quite small range of valid
input values for particle concentration values, these tests check
exhaustively that a corresponding AQI value can be constructed for every
input valid value.



### `tests::check_locating_works`
Checks that
- A test coordinate outside germany is not found
- A second test coordinate (here, Freiburg) is found
- The second test coordinate only matches one city

Note: This test requires that `DEBS_DATA_ROOT` is correctly set.

### `tests::check_locating_samples_works`
Using the test dataset generated by the `gen_smaller_dataset` binary,
this test checks if exactly one location can be found for every messsage
in the test data set.

Note: This test requires that `DEBS_DATA_ROOT` is correctly set.

